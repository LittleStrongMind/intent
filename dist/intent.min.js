var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,d,a){c!=Array.prototype&&c!=Object.prototype&&(c[d]=a.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,d,a,e){if(d){a=$jscomp.global;c=c.split(".");for(e=0;e<c.length-1;e++){var g=c[e];g in a||(a[g]={});a=a[g]}c=c[c.length-1];e=a[c];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(a,c,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(c,a,e){var d=this.length||0;0>a&&(a=Math.max(0,d+a));if(null==e||e>d)e=d;e=Number(e);0>e&&(e=Math.max(0,d+e));for(a=Number(a||0);a<e;a++)this[a]=c;return this}},"es6","es3");
var _createClass=function(){function c(c,a){for(var e=0;e<a.length;e++){var d=a[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(d,a,e){a&&c(d.prototype,a);e&&c(d,e);return d}}();function _classCallCheck(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function");}
(function(c){var d=0,a=null;a={get:function(a,b){b=b||c;a=b.querySelectorAll(a);return 1<a.length?a:a[0]},create:function(a,b,f){a=c.createElement(a);a.className=b;a.id=f||"";return a},stringToArray:function(a){return a&&0!==a.length?a.replace(/\r\n/g,"\n").split("\n"):[]},arrayToString:function(a){return 0<a.length?a.join("\n"):""}};var e=function(){function c(){_classCallCheck(this,c);this.mode=null;this.DOM={body:a.get("body"),modal:a.get(".c-intent-modal"),form:a.get(".js-intent-modal-form"),
actions:{create:a.get(".c-intent-modal__actions-bar__create-button"),edit:a.get(".c-intent-modal__actions-bar__edit-button"),cancel:a.get(".c-intent-modal__actions-bar__cancel-button"),close:a.get(".c-intent-modal__close-icon"),submit:null}};var b=this;this.form={submittable:!1,inputs:a.get("input, textarea",b.DOM.form),get data(){var a={};b.form.inputs.forEach(function(b){a[b.name]=b.value});return a},fill:function(f){for(var c in b.form.inputs){var d=b.form.inputs[c];f.hasOwnProperty(d.name)&&(d.value=
Array.isArray(f[d.name])?a.arrayToString(f[d.name]):f[d.name])}},disable:function(){b.form.inputs.forEach(function(b){b.readOnly=!0})},enable:function(){b.form.inputs.forEach(function(b){b.readOnly=!1})}};this.listeners.all()}_createClass(c,[{key:"open",value:function(b){this.DOM.body.classList.add("o-body--opened-modal");this.DOM.modal.classList.add("c-intent-modal--"+b+"-mode");this.DOM.actions[b]&&(this.DOM.actions.submit=this.DOM.actions[b],this.DOM.actions.submit.classList.add("js-intent-modal-form__submit-button"));
this.mode=b}},{key:"close",value:function(b){this.DOM.body.classList.remove("o-body--opened-modal");this.DOM.modal.classList.remove("c-intent-modal--"+this.mode+"-mode");this.DOM.actions[this.mode]&&(this.DOM.actions.submit.classList.remove("js-intent-modal-form__submit-button"),b&&this.DOM.actions.submit.removeEventListener("click",b),this.DOM.actions.submit=null);this.DOM.form.reset();this.form.enable();this.form.submittable=!1;this.mode=null}},{key:"listeners",get:function(){var b=this,f=null;
return f={all:function(){f.executionOf.close();f.executionOf.changes()},displayOf:{},executionOf:{close:function(){var a=function(a){a.preventDefault();b.close()};b.DOM.actions.close.addEventListener("click",a);b.DOM.actions.cancel.addEventListener("click",a)},changes:function(){var f=a.get("input, textarea",b.DOM.form),c=function(){var a=!0;f.forEach(function(b){a=a&&""!==b.value});null!==b.DOM.actions.submit&&(b.DOM.actions.submit.disabled=!a);b.form.submittable=a};f.forEach(function(a){a.addEventListener("input",
c.bind(b,a))})}}}}}]);return c}(),g=function(){function c(b,a){var f=this;_classCallCheck(this,c);this.ID=d++;this.body=b||{};this.DOM=this.DOM();this.system=a;this.modal=this.system.modal;this.lastUpdated=new Date;if(!this.system)throw Error("Missing intent system.");this.listeners.all();setInterval(function(){f.updateDOMLastUpdate()},1E3)}_createClass(c,[{key:"timeSinceUpdate",value:function(){var b=Math.floor((new Date-this.lastUpdated)/1E3),a=Math.floor(b/31536E3);if(1<a)return a+" years";a=Math.floor(b/
2592E3);if(1<a)return a+" months";a=Math.floor(b/86400);if(1<a)return a+" days";a=Math.floor(b/3600);if(1<a)return a+" hours";a=Math.floor(b/60);return 1<a?a+" minutes":"seconds"}},{key:"updateDOMTitle",value:function(){this.DOM.title.innerHTML="\x3ca href\x3d'#'\x3e"+this.body.title+"\x3c/a\x3e"}},{key:"updateDOMLastUpdate",value:function(){this.DOM.updated.innerHTML=this.timeSinceUpdate()+" ago"}},{key:"DOM",value:function(){var b=a.create("article","c-card");b.innerHTML='\n\n            \x3ch1 class\x3d"c-card__title"\x3e\x3ca href\x3d"#"\x3e'+
this.body.title+'\x3c/a\x3e\x3c/h1\x3e\n\n            \x3caside class\x3d"c-card__meta"\x3e\n\n                \x3cdiv class\x3d"c-card__updated"\x3e\n                    \x3cspan class\x3d"c-card__updated__label"\x3eLast Updated\x3c/span\x3e\n                    \x3cspan class\x3d"c-card__updated__time js-updated-time"\x3eseconds ago\x3c/span\x3e\n                \x3c/div\x3e\n\n                \x3cdiv class\x3d"c-card__actions" role\x3d"navigation"\x3e\n\n                    \n                \x3csvg class\x3d"c-card__actions__edit" role\x3d"button" viewBox\x3d"0 0 24 24" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\n                    \x3cpath d\x3d"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/\x3e\n                \x3c/svg\x3e\n            \n\n                    \n                \x3csvg class\x3d"c-card__actions__delete" role\x3d"button" viewBox\x3d"0 0 24 24" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\n                    \x3cpath d\x3d"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/\x3e\n                \x3c/svg\x3e\n            \n\n                \x3c/div\x3e\n            \x3c/aside\x3e\n\n            \x3caside class\x3d"c-card__warning"\x3e\n\n                \x3ch1 class\x3d"c-card__warning__title"\x3eYou are about to delete this intent. Are you sure?\x3c/h1\x3e\n\n                \x3cdiv class\x3d"c-card__warning__actions"\x3e\n                    \x3cbutton class\x3d"c-card__warning__actions__confirm c-button c-button--red"\x3eYes I am\x3c/button\x3e\n                    \x3cbutton class\x3d"c-card__warning__actions__cancel c-button c-button--purple"\x3eNo I\'m not\x3c/button\x3e\n                \x3c/div\x3e\n            \x3c/aside\x3e\n\n        ';
return{card:b,title:a.get(".c-card__title",b),updated:a.get(".c-card__updated__time",b),actions:{edit:a.get("svg.c-card__actions__edit",b),delete:a.get("svg.c-card__actions__delete",b)},confirmation:{confirm:a.get(".c-card__warning__actions__confirm",b),cancel:a.get(".c-card__warning__actions__cancel",b)}}}},{key:"title",get:function(){return this.body.title}},{key:"expressions",get:function(){return this.body.expressions}},{key:"answer",get:function(){return this.body.answer}},{key:"listeners",get:function(){var b=
this,c=null;return c={all:function(){c.displayOf.form.edit();c.displayOf.form.delete();c.displayOf.form.show();c.executionOf.deletion.cancel();c.executionOf.deletion.confirm()},displayOf:{form:{edit:function(){b.DOM.actions.edit.addEventListener("click",function(){b.modal.open("edit");b.modal.form.fill(b.body);c.executionOf.edit()})},delete:function(){if(!b.DOM.actions.delete)throw Error("Missing delete icon DOM element.");b.DOM.actions.delete.addEventListener("click",function(){b.DOM.card.classList.add("c-card--delete-flag");
c.executionOf.deletion.shown=!0})},show:function(){b.DOM.title.addEventListener("click",function(a){a.preventDefault();b.modal.open("view");b.modal.form.disable();b.modal.form.fill(b.body)})}}},executionOf:{deletion:{shown:!1,cancel:function(){if(!b.DOM.confirmation.cancel)throw Error("Missing cancel deletion button.");b.DOM.confirmation.cancel.addEventListener("click",function(){b.DOM.card.classList.remove("c-card--delete-flag");c.executionOf.deletion.shown=!1})},confirm:function(){if(!b.DOM.confirmation.confirm)throw Error("Missing confirm deletion button.");
b.DOM.confirmation.confirm.addEventListener("click",function(){c.executionOf.deletion.shown&&b.system.remove(b.ID)})}},edit:function(){b.modal.DOM.actions.edit.addEventListener("click",function h(c){c.preventDefault();b.modal.form.submittable&&(c=b.modal.form.data,c.expressions=a.stringToArray(c.expressions),b.body=c,b.updateDOMTitle(),b.lastUpdated=new Date,b.modal.close(h))})}}}}}]);return c}();new (function(){function c(b){_classCallCheck(this,c);this.intents={};this.modal=new e;this.DOM={body:a.get("body"),
container:a.get(b)};this.listeners.all()}_createClass(c,[{key:"add",value:function(b){var c=a.get(".js-anchor",this.DOM.container);if(b&&b.hasOwnProperty("ID"))this.intents[b.ID]=b;else throw Error("Insertion failed.");this.DOM.container.insertBefore(b.DOM.card,c)}},{key:"remove",value:function(a){var b=this.intents[a].DOM.card;delete this.intents[a];b.parentNode.removeChild(b)}},{key:"listeners",get:function(){var b=this,c=null;return c={all:function(){c.displayOf.form();c.executionOf.create()},
displayOf:{form:function(){var c=a.get(".c-new-intent-button");if(!c)throw Error("Missing new intent card button.");c.addEventListener("click",function(){b.modal.open("create")})}},executionOf:{create:function(){b.modal.DOM.actions.create.addEventListener("click",function(){event.preventDefault();if(b.modal.form.submittable){var c=b.modal.form.data;c.expressions=a.stringToArray(c.expressions);b.add(new g(c,b));b.modal.close()}})}}}}}]);return c}())(".o-section")})(document);
